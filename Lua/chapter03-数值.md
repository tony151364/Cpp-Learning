
- 从Lua5.3开始，Lua语言为数值格式提供了两种选择
  - integer的64位整型 
  - float的双精度类型（本书中float不代表单精度）
- Lua精简（Small Lua）模式
  -32位整型
  - 单精度浮点类型

## 3.1 数值常量
- 具有十进制小数或者指数的数值会被当做浮点型值，否则被当做整型
```lua
4.57e-3  --> 0.00457
0.3e12  --> 300000000000.0
5E+20  --> 5e+20
```
- 整型值和浮点型值的类型都是"number"
```lua
type(3)  --> number
type(3.0)  --> number
type(3.5)  --> number
```
- 因此，它们可以相互转换。同时，具有相同算术值的整型值和浮点值在Lua语言中是相等的
```lua
1 == 1.0  --> true
-3 == -3.0  --> true
0.2e3 == 200  --> true
```
- 需要区分时，可以用math.type
```lua
math.type(3)    --> integer
math.type(3.0)  --> float
```
- Lua语言还支持十六进制的浮点数，这种十六进制浮点数由小数部分和以p或P开头的指数组成
```lua

0xff        --> 255
0x1A3       --> 419
0x0.2       --> 0.125
0x1p-1      --> 0.5
0xa.bp2     --> 42.75
```
- 格式化输出,虽然这种格式很难阅读，但是这种格式可以保留所有浮点数的精度，并且比十进制转换速度更快
```lua
string.format("a", 419)     --> 0x1.a3p+8
```

## 3.2 算术运算
- 加、减、乘、除、取负数(单目减法)
- 取整除法(floor除法)、取模和指数运算
- 对于Lua5.3 中引入的整型而言，主要的建议是**“开发人员要么选择忽略整形和浮点型二者的不同，要么就完整的控制每一个数值的表示”** 。因此，所有的算术操作不论操作整型值还是浮点型值，结果都应该是一样的。
```lua
13 +15          --> 28
13.0 +15.0      --> 28.0
13.0 +25        --> 28.0
-(3 * 6.0)      --> -18.0
```
- 为了避免两个整型值相处和两个浮点型值相除导致不一样的结果，除法运算结果永远是浮点数
```lua
3.0  / 2.0  --> 1.5
3 / 2  --> 1.5
```
- Lua5.3 针对整数除法引入了一个称为floor除法的新算术运算符
- *floor*除法会对得到的商想负无穷取值，从而保证结果是一个整数。这样，floor除法就可以与其他算数运算一样遵循同样的规则：如果操作数都是整形值，那么结果就是整型值，否则就是浮点值（其值是一个整数）
- 以下公式是取模运算的定义：
```lua
a % b == a - ((a // b) * b)
```
- 对于整形操作数取模，其结果的符号永远与第二个操作数的符号一致
- 对于实数类型，取模运算有一些不同，例如，x - x % 0.01恰好是x保留两位小数的结果，x - x % 0.001恰好是x保留三位小数的结果：
```lua
x = math.pi
x - x % 0.01      --> 3.14
x - x % 0.001     --> 3.141
```
- Lua同样支持幂运算，使用符号^表示。就像除法一样，幂运算也永远是浮点类型

## 3.3 关系运算
- 关系运算的结果是Boolean类型
```lua
<  >  <=  >=  ==  ~=
```
- 当用==或~=比较是，若两个值类型不同，Lua语言认为它们是不相等的。否则再根据具体的值进行比较

## 3.4数学库
- huge（最大可表示的值，在大多数平台上代表*inf*）
- 所有的三角函数都以弧度为单位，并通过函数deg和rad进行角度和弧度的转换

### 3.4.1 随机数发生器
- 函数 math.random有三种调用方式
```lua
math.random()         --> 返回[0, 1)范围内均匀分布的伪随机数
math.random(6)        --> 返回[1, 6]之间的伪随机数
math.random(3, 6)     --> 返回[3, 6]之间的伪随机数
```
- randomseed用于设置伪随机数发生器和种子。默认使用1位种子初始化伪随机发生器

### 3.4.2 取整函数
- 数学库提供了三个取整函数：floor（向负无穷取整）、ceil（向正无穷取整）和modf（向零取整）
- 如果想将数值x向最近的整数(nearest integer)取整，可以对x+0.5调用floor函数

## 3.5 表示范围
- Lua用64个比特位来存储整型值
- 如果超过最大值或最小值，就会进行*回环(wrap around)*
## 3.6 惯例
- 这两部分讲的是计组里面数值的东西（先略过）





