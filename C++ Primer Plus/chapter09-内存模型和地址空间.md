
# 第9章 内存模型和名称空间
- C++为在内存中存储数据方面提供了多种选择。可以选择保留在内存中的时间长度（存储连续性）以及程序的那一部分可以访问数据（作用域和链接）等。
- C++名称空间是另一种控制访问权的方式。通常，大型程序都有多个源文件代码组成，这些文件可能共享一些数据。这样的程序涉及到程序文件的单独编译。


## 9.1 单独编译
- 和C语言一样，C++也允许甚至鼓励程序员将组件函数放在独立的文件中，这样管理更加方便。当一个文件修改时，只需重新编译该文件即可，链接器再将其重新链接。
- 将多个文件所共用的内容，如结构体放置再头文件中，要修改结构声明时，只需要修改头文件即可。
- 另外，也可以将函数原型放在头文件中。因此，可以将原来的程序分为三部分：
    - 头文件：包含结构声明和使用这些结构的函数的原型。
    - 源代码文件：包含与结构有关的函数的代码。
    - 源代码文件：包含调用与结构相关的函数的代码。（main）
- 这种组织方式也与OOP方法一致
    - 一个文件（头文件）包含了用户定义类型的定义。
    - 另一个文件包含操纵用户定义类型的函数的代码。
    - 这两个文件组成了一个软件包，可用于各种程序中。
- 不要将函数定义或变量声明放在头文件中。例如，如果在头文件包含一个函数定义，两个文件若都包含该函数，最后形成的程序将包含同一函数的两个定义，除非这函数是内联的，否则就会出错。
- 头文件常包含的内容：
    - 函数原型
    - 使用#define或const定义的符号常量。const有特殊的链接属性
    - 结构声明。这是可以的，因为它们不创建变量，在源代码文件声明时才创建
    - 类声明。
    - 模板声明。不是将被编译的代码，它们指示编译器如何生成与源代码中的函数调用相匹配的函数定义。
    - 内联函数 。有特殊链接属性

- [ ] 注意：只需将源代码文件加入到项目中，而不用加入头文件。这是因为#include指令管理头文件。
- [ ] 注意：不要使用#include来包含源代码文件，这样做将导致多重声明。
- [ ] 警告：在IDE中，不要将头文件加入到项目列表中，也不要在源代码文件使用#include来包含其他源代码文件
```C++
// 9.1coordin.h -- structure templates and function prototypes
// structure templates
#ifndef COORDIN_H_
#define COORDIN_H_

struct polar
{
	double distance;  // distance from origin
	double angle;  // direction from origin
};

struct rect
{
	double x;  // horizontal distance from origin
	double y;  // vertical distance from origin
};

// prototypes
polar rect_to_polar(rect xypos);
void show_polar(polar dapos);

#endif
```
